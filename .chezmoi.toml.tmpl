{{- /*
  .chezmoi.toml.tmpl
  Initialization template for chezmoi init
  Prompts:
    - profile (default: "butterfly")
  Auto-detects has_battery by probing common power_supply paths
*/ -}}

{{- $profile := promptStringOnce . "profile" "Which machine profile are you configuring? (butterfly/garden)" "butterfly" -}}
{{- $hasBattery := or (stat "/sys/class/power_supply/BAT0") (stat "/sys/class/power_supply/BAT1") (stat "/sys/class/power_supply/BAT") -}}

[data]
profile = {{ $profile | quote }}
has_battery = {{ if $hasBattery }}true{{ else }}false{{ end }}

# Notes:
# - This template is executed during `chezmoi init --apply` and writes the above values to your ~/.config/chezmoi/chezmoi.toml as [data].
# - The `has_battery` value is auto-detected from /sys/class/power_supply and does not prompt the user.
# - Modify defaults above if you prefer different initial values.
